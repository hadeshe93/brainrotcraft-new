# 实现拉取数据之后对内容进行改写

我想让你为我实现拉取并过滤剩下待写入数据时，利用 LLM 对文案进行改写，避免搜索引擎对于重复内容进行惩罚。请你先根据我如下的需求文档，进行分析、评估、审核，有问题可以向我提问，最后要求以 Markdwon 格式输出一份中的文需求实现指引文档，保存到 @docs/biz/project/dev-fetch-then-rewrite/ 目录下，供我审核，我审核通过之后方可开始写代码。ultrathink

要求：
1. 文档信息浓缩但不遗漏任何重点或细节，避免重复描述；

## 需求文档

为了让导入的数据最后在 C 端上呈现并以「高质量内容」的状态给搜索引擎收录，而不被判定为重复内容，我们需要针对待写入数据表的数据中的文案内容，利用 LLM 进行改写。

以下列出涉及内容：
- 分类、标签、特性合集、游戏中的 `metadataTitle`、`metadataDescription` 和 `content`

改写时机：
- 例如 @src/app/api/admin/fetch/categories/route.ts 中在调用 `importCategories` 函数之前，针对 `importData` 中的目标内容进行改写；

---

我仔细阅读了你产出的指引文档，有如下几个疑问和建议，请解答。ultrathink

1. 「### 2.2 改写流程」中，为什么是导入数据库再调用 LLM API？应该是先调用 LLM API 改写成功后写入数据库；
2. 「### 3.1 内容改写服务」中，应该使用 `google/gemini-2.5-pro`；
3. 「### 3.2 改写提示词模板」中给出的提示词模板质量太低了，请复用 @tools/rewrite/geometrylite.io/lib/prompt-builder.ts 中的提示词，并加以改造，同时能够重写 3 个字段；
4. 「### 4.1 LLM 配置」这里的模型选择也是错了，应该使用 `google/gemini-2.5-pro`，而且只使用 OpenRouter；
5. 「### 4.3 性能优化」不用缓存了，只是管理员的低频操作；
6. 为什么我们需要「## 五、数据库设计更新」？什么场景需要？
7. 如果有了这个「## 六、API 接口设计」，那也请你补充 CMS 上的触发入口图，用 ASCII 绘制即可；
8. 「七、环境变量配置」中只保留 `OPENROUTER_API_KEY` 即可，而且现在在 @.env.local 就有，其他不需要；

---

继续优化文档：
1. 请你再次仔细阅读 @tools/rewrite/geometrylite.io/lib/prompt-builder.ts 中提供的提示词模板，我需要你严格对齐针对 `content` 内容的模板，里面列清楚了内容的结构，以及调研要求，你把整个部分都拿过来，然后再这基础上再添加元信息的改写要求；
2. 先去掉手动改写部分吧，你那个图也没画明白，这块先去掉；
3. 「五、数据库设计更新（可选）」整个去掉。